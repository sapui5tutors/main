<!-- The summary page which is displayed in the detail area in multi-select mode. It provides an overview of all items currently selected. -->
<mvc:View controllerName="nw.epm.refapps.purchaseorders.approve.controller.S3_PurchaseOrderSummary" id="summaryView"
    xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core" xmlns:semantic="sap.m.semantic" xmlns:layout="sap.ui.layout">
	<semantic:DetailPage id="DetailPage" title="{path: 'globalProperties>/selectedPurchaseOrders', formatter: '.formatter.summaryPageTitle'}"
	    showNavButton="{device>/system/phone}" navButtonPress="onNavButtonPress">
	    	    <semantic:positiveAction>
	        <semantic:PositiveAction id="approveButton" text="{i18n>xbut.approveAll}" enabled="{= ${globalProperties>/selectedPurchaseOrders}.length > 0}" press="onApprove" />
	   </semantic:positiveAction>
	    <semantic:negativeAction>
	        <semantic:NegativeAction id="rejectButton" text="{i18n>xbut.rejectAll}" enabled="{= ${globalProperties>/selectedPurchaseOrders}.length > 0}" press="onReject" />
	   </semantic:negativeAction>
		<semantic:content>
    		<ObjectHeader id="header" responsive="true"
	    		title="{i18n>xtit.summaryHeaderTitle}"
    			number="{parts: [ {path: 'viewProperties>/SimulateBudgetReduction/TotalApprovedAmount'}, {path: 'viewProperties>/SimulateBudgetReduction/Currency'}],
                    type : 'sap.ui.model.type.Currency',
                    formatOptions: { showMeasure: false }}"  		    	
		    	numberUnit="{viewProperties>/SimulateBudgetReduction/Currency}" />

            <!--Allow adding fields before the summary table with the selected purchase orders -->
    		<core:ExtensionPoint name="extensionBeforeSummaryTable"/>

    		<Table id ="purchaseOrderTable" items="{globalProperties>/selectedPurchaseOrders}" updateFinished="onTableUpdateFinished" class="sapUiForceWidthAuto sapUiResponsiveMargin"
	    	        noDataText="{i18n>ymsg.noDataTextSummary}">
		    	<columns>
			    	<!-- Supplier -->
				    <Column id="supplierNameColumn">
					    <header>
						    <Label id="supplierNameLabel" text="{/#PurchaseOrder/SupplierName/@sap:label}"/>
    					</header>
	    			</Column>
		    		<!-- Purchase Order ID -->
			    	<!-- Setting minScreenWidth to Small lets the column go to pop-in for portrait mode but not for landscape mode.-->
				    <Column id="poIdColumn" demandPopin="true" popinDisplay="Inline" minScreenWidth="Small">
					    <header>
						    <Label id="poIdLabel" text="{/#PurchaseOrder/POId/@sap:label}"/>
    					</header>
	    			</Column>
		    		<!-- Sum -->
			    	<Column id="grossAmountColumn" hAlign="Right">
				    	<header>
					    	<Label id="grossAmountLabel" text="{/#PurchaseOrder/GrossAmount/@sap:label}"/>
    					</header>
    					<footer>
                            <layout:Grid id="balanceGrid" width= "100%" containerQuery=" true" hSpacing="0">
                                <Label id="budgetLabel" text="{i18n>xfld.budget}" width="100%" labelFor="budget">
                                    <layoutData>
                                        <layout:GridData id="budgetLabelGridData" span="L6 M6 S6" />
                                    </layoutData>
                                </Label>
                                <ObjectNumber id="budget" 
    								number="{parts: [ {path: 'viewProperties>/SimulateBudgetReduction/OverallBudget'}, {path: 'viewProperties>/SimulateBudgetReduction/Currency'}],
                                		type : 'sap.ui.model.type.Currency',
                            			formatOptions: { showMeasure: false }}"                                      	                                
                                	unit="{viewProperties>/SimulateBudgetReduction/Currency}"  
                                    emphasized="false" textAlign="End">
                                    <layoutData>
                                        <layout:GridData id="budgetGridData" span="L6 M6 S6" />
                                    </layoutData>				    
				                </ObjectNumber>				
                                <Label id="balanceLabel" text="{i18n>xfld.balance}" width="100%" labelFor="balance">
                                    <layoutData>
                                        <layout:GridData id="balanceLabelGridData" span="L6 M6 S6" linebreak="true" />
                                    </layoutData>
                                </Label>
                                <ObjectNumber id="balance" 
    								number="{parts: [ {path: 'viewProperties>/SimulateBudgetReduction/RemainingBudget'}, {path: 'viewProperties>/SimulateBudgetReduction/Currency'}],
                                		type : 'sap.ui.model.type.Currency',
                            			formatOptions: { showMeasure: false }}"                                      	
                                	unit="{viewProperties>/SimulateBudgetReduction/Currency}"  textAlign="End">
                                    <layoutData>
                                        <layout:GridData id="balanceGridData" span="L6 M6 S6" />
                                    </layoutData>				    
				                </ObjectNumber>
                            </layout:Grid>
    					</footer>
	    			</Column>
		    	</columns>
    			<ColumnListItem>
	    			<cells>
		    			<!-- Supplier -->
			    		<ObjectIdentifier id="supplierNameCell"
			    		    title="{globalProperties>SupplierName}" text="{path: 'globalProperties>ItemCount', formatter: '.formatter.items'}" class="sapMTableContentMargin"/>
				    	<!-- Purchase Order ID -->
					    <Text id="poIdCell" text="{globalProperties>POId}" class="sapMTableContentMargin"/>
    					<!-- Sum -->
	    				<ObjectNumber id="grossAmountCell"
    						number="{parts: [ {path: 'globalProperties>GrossAmount'}, {path: 'globalProperties>CurrencyCode'}],
                                type : 'sap.ui.model.type.Currency',
                                formatter: '.formatter.minus',
                            	formatOptions: { showMeasure: false }}" 
	    				    unit="{globalProperties>CurrencyCode}" class="sapMTableContentMargin"/>
		    		</cells>
			    </ColumnListItem>
		    </Table>
		</semantic:content>
	</semantic:DetailPage>
</mvc:View>